{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44080316-241692617940885c4f90d7de4'; // API ключ\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  const response = await axios.get(url);\n\n  if (response.status !== 200) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  return response.data;\n}\n","// render-function\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGallery(images) {\n  const gallery = document.getElementById('results');\n\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.classList.add('card');\n\n    card.innerHTML = `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\"/>\n      </a>\n      <div class=\"card-body\">\n        <p>${image.tags}</p>\n        <div class=\"stats\">\n          <span>Likes: ${image.likes}</span>\n          <span>Views: ${image.views}</span>\n          <span>Comments: ${image.comments}</span>\n          <span>Downloads: ${image.downloads}</span>\n        </div>\n      </div>\n    `;\n    gallery.appendChild(card);\n  });\n\n  const lightbox = new SimpleLightbox('.gallery-link');\n  lightbox.refresh();\n\n  smoothScroll();\n}\n\nexport function showNotification(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nfunction smoothScroll() { \n  const gallery = document.getElementById('results');\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","//main.js\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showNotification } from './js/render-function.js';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet currentQuery = '';\n\ndocument\n  .getElementById('searchForm')\n  .addEventListener('submit', async event => {\n    event.preventDefault();\n\n    currentQuery = event.target.elements.search.value.trim();\n    if (!currentQuery) {\n      showNotification('Please enter a search term');\n      return;\n    }\n\n    currentPage = 1;\n    document.getElementById('results').innerHTML = '';\n    document.getElementById('loadMoreBtn').style.display = 'none';\n\n    await loadImages()\n    });\n\ndocument.getElementById('loadMoreBtn').addEventListener('click', async () => {\n  currentPage++;\n  await loadImages();\n\n});\n\nasync function loadImages() {\n  document\n    .getElementById('results')\n    .insertAdjacentHTML('beforeend', '<div class=\"loader\">Loading...</div>');\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      showNotification(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderGallery(data.hits);\n      if (currentPage * 15 >= data.totalHits) {\n        document.getElementById('loadMoreBtn').style.display = 'none';\n        showNotification(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      } else {\n        document.getElementById('loadMoreBtn').style.display = 'block';\n      }\n    }\n  } catch (error) {\n    showNotification(error.message);\n  } finally {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n      loader.remove();\n    }\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","axios","renderGallery","images","gallery","image","card","SimpleLightbox","smoothScroll","showNotification","message","iziToast","cardHeight","currentPage","currentQuery","event","loadImages","data","error","loader"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAEpFE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAEpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,OAAOA,EAAS,IAClB,CCXO,SAASE,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,eAAe,SAAS,EAEjDD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EAEzBA,EAAK,UAAY;AAAA,iBACJD,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,aAG7CA,EAAM,IAAI;AAAA;AAAA,yBAEEA,EAAM,KAAK;AAAA,yBACXA,EAAM,KAAK;AAAA,4BACRA,EAAM,QAAQ;AAAA,6BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,MAIxCD,EAAQ,YAAYE,CAAI,CAC5B,CAAG,EAEgB,IAAIC,EAAe,eAAe,EAC1C,QAAO,EAEhBC,GACF,CAEO,SAASC,EAAiBC,EAAS,CACxCC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,CAEA,SAASF,GAAe,CACtB,MAAMJ,EAAU,SAAS,eAAe,SAAS,EAC3C,CAAE,OAAQQ,CAAU,EAAKR,EAAQ,kBAAkB,wBAEzD,OAAO,SAAS,CACd,IAAKQ,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CC9CA,IAAIC,EAAc,EACdC,EAAe,GAEnB,SACG,eAAe,YAAY,EAC3B,iBAAiB,SAAU,MAAMC,GAAS,CAIzC,GAHAA,EAAM,eAAc,EAEpBD,EAAeC,EAAM,OAAO,SAAS,OAAO,MAAM,OAC9C,CAACD,EAAc,CACjBL,EAAiB,4BAA4B,EAC7C,MACD,CAEDI,EAAc,EACd,SAAS,eAAe,SAAS,EAAE,UAAY,GAC/C,SAAS,eAAe,aAAa,EAAE,MAAM,QAAU,OAEvD,MAAMG,EAAY,CACtB,CAAK,EAEL,SAAS,eAAe,aAAa,EAAE,iBAAiB,QAAS,SAAY,CAC3EH,IACA,MAAMG,EAAU,CAElB,CAAC,EAED,eAAeA,GAAa,CAC1B,SACG,eAAe,SAAS,EACxB,mBAAmB,YAAa,sCAAsC,EAEzE,GAAI,CACF,MAAMC,EAAO,MAAMtB,EAAYmB,EAAcD,CAAW,EAEpDI,EAAK,KAAK,SAAW,EACvBR,EACE,0EACR,GAEMP,EAAce,EAAK,IAAI,EACnBJ,EAAc,IAAMI,EAAK,WAC3B,SAAS,eAAe,aAAa,EAAE,MAAM,QAAU,OACvDR,EACE,4DACV,GAEQ,SAAS,eAAe,aAAa,EAAE,MAAM,QAAU,QAG5D,OAAQS,EAAO,CACdT,EAAiBS,EAAM,OAAO,CAClC,QAAY,CACR,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEhB,CACH"}